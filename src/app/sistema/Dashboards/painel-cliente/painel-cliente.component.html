<div class="main-container">

    <section class="titulo">
        <div class="welcome">
            <div class="bom-dia">
                <h1> Bom dia, {{ usuario?.nome }} üëã</h1>
                <p>T√©cnico em Ar Condicionado</p>
            </div>

            <div class="clima">

                <div class="clima-left">
                    <div class="clima-info">
                        <img id="icone-do-clima" [src]="iconUrl" alt="clima">
                        <span id="tipo-do-clima ">{{ weatherDescription | titlecase }}</span>
                    </div>
                    <h3 id="temperatura">{{ temperature |number:'1.0-0' }}¬∞<span>C</span></h3>
                </div>

                <div class="clima-right">
                    <h3 id="hora">{{ currentTime }}</h3>
                    <h3 id="data">{{ currentDate }}</h3>
                    <h3 id="localidade">{{ weatherData.name }}</h3>
                </div>
            </div>
        </div>

        <div class="cards">
            <h1>Dica r√°pida</h1>
            <p>Responder mensagens rapidamente aumenta suas chances de fechar um servi√ßo.</p>
            <button id="btn-acessar-chat">Acessar chat</button>
        </div>

    </section>


    <section class="cards-dados-servicos-profissionais">

        <div id="card-total-de-servicos">
            <span>{{quantidadeTotalServicos}}</span>
            <h2><img src="/assets/icones/total-servicos-icon.svg">Total de servi√ßos</h2>
        </div>

        <div id="card-quantidade-profissionas-ativos">
            <span>{{avaliacaoMedia}} ‚òÖ</span>
            <h2><img src="/assets/icones/avaliacao-media-icon.svg">Avalia√ß√£o M√©dia</h2>
        </div>

        <div id="card-quantidade-profissionas-ativos">
            <span>{{quantidadeServicosDoMes}}</span>
            <h2><img src="/assets/icones/qtd-servicos-mes-icon.svg">Servi√ßos <h2 id="mes-servico">Maio</h2></h2>
        </div>

        <div id="card-quantidade-servicos">
            <span>{{quantidadeClientesAtendidos}}</span>
            <h2><img src="/assets/icones/qtd-clientes-atendidos-icon.svg">Clientes Atendidos</h2>
        </div>
    </section>

    <section class="grafico" id="chart-crescimento-mensal">
    </section>

    <section class="usuarios-e-grafico">
        <section class="novos-usuarios">
            <h2>Hist√≥rico de Servi√ßos</h2>
            <div class="tabela-container">
                <table>
                <thead>
                <tr>
                    <th>Servi√ßo</th>
                    <th>Profissional</th>
                    <th>Data</th>
                    <th>Status</th>
                    <th>C√≥digo</th>
                    <th></th>
                </tr>
                </thead>

                <tbody>
                <tr *ngFor="let u of historicoServicos">
                    <td>{{ u.tipo }}</td>
                    <td class="cliente-cell">
                    <div class="avatar" [style.backgroundColor]="getAvatarColor(u.nome)">
                        <span>{{ getInitials(u.nome) }}</span>
                    </div>
                    <span class="cliente-nome">{{ u.nome }}</span>
                    </td>
                    <td>{{ u.ingressou | date:'dd/MM/yyyy' }}</td>
                    <td>
                        <app-status-badge [status]="u.status"></app-status-badge>
                    </td>
                    
                    <td>XXXXXX</td>
                    <td>
                    <button
                        *ngIf="u.status != StatusServico.CANCELADO"
                        [disabled]="u.status === StatusServico.EM_PROGRESSO"
                        (click)="abrirModalAvaliarProfissional(u)"
                        class="avaliar-profissional"
                    >
                        Avaliar Profissional
                    </button>
                    </td>
                </tr>
                </tbody>

                </table>
            </div>
            <a class="ver-mais" routerLink="/usuario/historico-de-servicos">
                Ver mais
                <img src="assets/icones/seta-direita-icon.svg" alt="Seta para a direita" class="ver-mais__icon" />
            </a>
        </section>
<!--     
        <section class="grafico" id="chart-grafico">
        </section> -->
    </section>

</div>

<ng-template #avaliacaoTemplate>
  <div class="avaliacao-modal">
    <div class="avaliacao-modal-section">
      <label class="avaliacao-modal-label">Como estava o servi√ßo?</label>

      <div class="avaliacao-stars">
        <button
          type="button"
          *ngFor="let star of [1,2,3,4,5]"
          (click)="setAvaliacaoEstrelas(star)"
          (mouseenter)="onStarHover(star)"
          (mouseleave)="onStarLeave()"
          [class.filled]="star <= (starHover || avaliacaoEstrelas)"
        >
          ‚òÖ
        </button>
      </div>
    </div>

    <div class="avaliacao-modal-section">
      <label class="avaliacao-modal-label">D√™ um t√≠tulo √† sua avalia√ß√£o</label>
      <input
        type="text"
        [(ngModel)]="avaliacaoTitulo"
        placeholder="Digite um t√≠tulo para a avalia√ß√£o">
    </div>

    <div class="avaliacao-modal-section">
      <label class="avaliacao-modal-label">Escrever uma avalia√ß√£o</label>
      <textarea
        [(ngModel)]="avaliacaoTexto"
        placeholder="O que os outros clientes precisam saber?">
      </textarea>
    </div>

    <p class="avaliacao-erro" *ngIf="avaliacaoErro">
      {{ avaliacaoErro }}
    </p>
  </div>
</ng-template>
